<!DOCTYPE html>
<html>
<head>
    <title>SignalR Simple Chat</title>
    <style type="text/css">
        .container {
            background-color: #99CCFF;
            border: thick solid #808080;
            padding: 20px;
            margin: 20px;
        }
    </style>
</head>
<body ng-app="eventHubSample">
    <div class="container" ng-controller="SpsCtrl">
        <p style="text-align: center;"><img src="Images/{{state}}.png" alt="{{state}}" style="width: 500px; height: 500px;"/></p>
    </div>
    <!--Script references. -->
    <!--Reference the jQuery library. -->
    <script src="Scripts/jquery-1.9.1.js" ></script>
    <!--Reference the SignalR library. -->
    <script src="Scripts/jquery.signalR-2.1.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>
    <script src="Scripts/angular.min.js"></script>
    <script src="Scripts/angular-signalr-hub.js"></script>
    <!--Add script to update the page and send messages.--> 
    <script>
        angular.module('eventHubSample', ['SignalR']).controller('SpsCtrl', ['$scope', 'Hub', function ($scope, Hub) {
            $scope.type = '';
            $scope.state = 'closed';
            var handState = new Hub('handStateHub', {
                listeners: {
                    'broadcastState': function (type, state) {
                        $scope.type = type;
                        $scope.state = state;
                        console.log('Type:', type, '  State:', state);
                        $scope.$apply();
                    }
                }
            });
        }]);
    </script>
</body>
</html>